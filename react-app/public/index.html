
<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>
  <div class="container">
    <h1>MST DATA</h1>
    <table class="table">
      <thead>
        <tr>
          <th>Count</th>
          <th>MST Maker</th>
          <th>Reference Pathogen</th>
          <th>Ratio</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <input type="number" class="form-control" placeholder="">
          </td>
          <td>
            <select class="form-control mst-maker">
              <option value="">--Select--</option>
              <option value="Cow">Cow</option>
              <option value="Human">Human</option>
              <option value="Dog">Dog</option>
              <option value="Pig">Pig</option>
              <option value="Chicken">Chicken</option>
              <option value="Other">Other</option>
            </select>
          </td>
          <td>
            <select class="form-control reference-pathogen">
              <option value="">--Select--</option>
              <option value="Campylobacter jejuni">Campylobacter jejuni</option>
              <option value="Cryptosporidium parvum">Cryptosporidium parvum</option>
              <option value="Giardia lambia">Giardia lambia</option>
              <option value="Other">Other</option>
            </select>
          </td>
          <td>
            <select class="form-control ratio">
              <option value="1:0.66">1:0.66</option>
              <option value="1:1">1:1</option>
              <option value="1:0.01">1:0.01</option>
              <option value="1:0.08">1:0.08</option>
              <option value="1:0.01">1:0.01</option>
              <option value="Other">Other</option>
            </select>
          </td>
        </tr>
      </tbody>
    </table>
    <button class="btn btn-primary" id="addRow">Add Row</button>

    <div class="d-flex justify-content-center">
      <button class="btn btn-primary" id="calculateEstimatedCount">Calculate Estimated Count</button>
    </div>
  </div>

  <script>
    document.getElementById('addRow').addEventListener('click', function () {
      const tableBody = document.querySelector('tbody');
      const rowCount = tableBody.querySelectorAll('tr').length + 1;

      const newRow = document.createElement('tr');
      newRow.innerHTML = `
        <td>
          <input type="number" class="form-control" placeholder="">
        </td>
        <td>
          <select class="form-control mst-maker">
            <option value="">--Select--</option>
            <option value="Cow">Cow</option>
            <option value="Human">Human</option>
            <option value="Dog">Dog</option>
            <option value="Pig">Pig</option>
            <option value="Chicken">Chicken</option>
            <option value="Other">Other</option>
          </select>
        </td>
        <td>
          <select class="form-control reference-pathogen">
            <option value="">--Select--</option>
            <option value="Campylobacter jejuni">Campylobacter jejuni</option>
            <option value="Cryptosporidium parvum">Cryptosporidium parvum</option>
            <option value="Giardia lambia">Giardia lambia</option>
            <option value="Other">Other</option>
          </select>
        </td>
        <td>
          <select class="form-control ratio">
            <option value="1:0.66">1:0.66</option>
            <option value="1:1">1:1</option>
            <option value="1:0.01">1:0.01</option>
            <option value="1:0.08">1:0.08</option>
            <option value="1:0.01">1:0.01</option>
            <option value="Other">Other</option>
          </select>
        </td>
      `;

      tableBody.appendChild(newRow);
    });

    document.addEventListener('change', function (event) {
      if (event.target.classList.contains('mst-maker')) {
        const selectedMstMaker = event.target.value;
        const ratioSelect = event.target.closest('tr').querySelector('.ratio');

        if (selectedMstMaker === 'Cow') {
          ratioSelect.value = '1:0.66';
        } else if (selectedMstMaker === 'Human') {
          ratioSelect.value = '1:1';
        } else if (selectedMstMaker === 'Dog') {
          ratioSelect.value = '1:0.01';
        } else if (selectedMstMaker === 'Pig') {
          ratioSelect.value = '1:0.08';
        } else if (selectedMstMaker === 'Chicken') {
          ratioSelect.value = '1:0.01';
        }
      }

    });

    document.getElementById('calculateEstimatedCount').addEventListener('click', function () {

      alert('Estimated Count calculated.');
    });

    // Event listener for MST Maker, Reference Pathogen, and Ratio "Other" option
    document.addEventListener('change', function (event) {
      if (event.target.classList.contains('form-control')) {
        if (event.target.value === 'Other') {
          event.target.parentElement.innerHTML = `<input type="text" class="form-control" placeholder="">`;
        }
      }
    });

  </script>
</body>
</html>