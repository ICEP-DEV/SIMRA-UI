<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="path/to/creativetim-styles.css">
  <title>Table Form</title>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>

<body>
  <div class="container mt-5">
    <h2 class="mb-3">MST DATA</h2>
    <table id="data-table" class="table table-striped table-bordered">
      <thead class="thead-light">
        <tr>
          <th>Count</th>
          <th>MST Maker Genes</th>
          <th>Ratio</th>
          <th>Reference Pathogen</th>
          <th>Model</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <input type="number" class="form-control" placeholder="">
          </td>
          <td>
            <select name="mstmaker_1" class="form-control" onchange="updateRatioOptions(this)">
              <option value="">--Select--</option>
              <option value="Cow">Cow</option>
              <option value="Human">Human</option>
              <option value="Dog">Dog</option>
              <option value="Pig">Pig</option>
              <option value="Chicken">Chicken</option>
              <option value="Other">Other</option>
            </select>
            <input type="text" name="other_mstmaker_1" class="form-control" style="display: none;">
          </td>
          <td>
            <select name="ratio_1" class="form-control">
              <option value="">--Select--</option>
              <option value="1:0.66">1:0.66</option>
              <option value="1:1">1:1</option>
              <option value="1:0.01">1:0.01</option>
              <option value="1:0.08">1:0.08</option>
              <option value="1:0.01">1:0.01</option>
            </select>
            <input type="text" name="other_ratio_1" class="form-control" style="display: none;">
          </td>
          <td>
            <select name="pathogen_1" class="form-control" onchange="updateModelOptions(this)">
              <option value="">--Select--</option>
              <option value="Cryptosporidium parvum">Cryptosporidium parvum</option>
              <option value="E. coli O157:H7">E. coli O157:H7</option>
              <option value="Campylobacter jejuni">Campylobacter jejuni</option>
              <option value="Salmonella typhi">Salmonella typhi</option>
              <option value="S. Flexneri">S. Flexneri</option>
              <option value="Vibrio cholera">Vibrio cholera</option>
              <option value="Giardia lambia">Giardia lambia</option>
              <option value="Entamoeba coli">Entamoeba coli</option>
              <option value="Other">Other</option>
            </select>
            <input type="text" name="other_pathogen_1" class="form-control" style="display: none;">
          </td>
          <td>
            <select name="model_1" class="form-control">
              <option value="">--Select--</option>
              <option value="Beta-Poisson">Beta-Poisson</option>
              <option value="Exponential">Exponential</option>
            </select>
            <input type="text" name="other_model_1" class="form-control" style="display: none;">
          </td>
        </tr>
      </tbody>
    </table>
    <button class="btn btn-primary" id="add-row-btn">Add Row</button>
  </div>

  <div class="d-flex justify-content-center">
    <button class="btn btn-primary" id="calculateEstimatedCount">Calculate Estimated Count</button>
  </div>
</div>

  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <script>
    const addRowButton = document.getElementById('add-row-btn');
    const dataTable = document.getElementById('data-table');
    const calculateButton = document.getElementById('calculate-estimated-count');
    let rowCount = 1;

    addRowButton.addEventListener('click', () => {
      rowCount++;
      const newRow = document.createElement('tr');
      newRow.innerHTML = `
                <td><input type="number" name="count_${rowCount}" class="form-control"></td>
                <td>
                    <select name="mstmaker_${rowCount}" class="form-control" onchange="updateRatioOptions(this)">
                      <option value="">--Select--</option>
                      <option value="Cow">Cow</option>
                      <option value="Human">Human</option>
                      <option value="Dog">Dog</option>
                      <option value="Pig">Pig</option>
                      <option value="Chicken">Chicken</option>
                      <option value="Other">Other</option>
                    </select>
                    <input type="text" name="other_mstmaker_${rowCount}" class="form-control" style="display: none;">
                </td>
                <td>
                    <select name="ratio_${rowCount}" class="form-control">
                      <option value="">--Select--</option>
                      <option value="1:0.66">1:0.66</option>
                      <option value="1:1">1:1</option>
                      <option value="1:0.01">1:0.01</option>
                      <option value="1:0.08">1:0.08</option>
                      <option value="1:0.01">1:0.01</option>
                    </select>
                    <input type="text" name="other_ratio_${rowCount}" class="form-control" style="display: none;">
                </td>
                <td>
                    <select name="pathogen_${rowCount}" class="form-control" onchange="updateModelOptions(this)">
                        <option value="">--Select--</option>
                        <option value="Cryptosporidium parvum">Cryptosporidium parvum</option>
                        <option value="E. coli O157:H7">E. coli O157:H7</option>
                        <option value="Campylobacter jejuni">Campylobacter jejuni</option>
                        <option value="Salmonella typhi">Salmonella typhi</option>
                        <option value="S. Flexneri">S. Flexneri</option>
                        <option value="Vibrio cholera">Vibrio cholera</option>
                        <option value="Giardia lambia">Giardia lambia</option>
                        <option value="Entamoeba coli">Entamoeba coli</option>
                        <option value="Other">Other</option>
                    </select>
                    <input type="text" name="other_pathogen_${rowCount}" class="form-control" style="display: none;">
                </td>
                <td>
                    <select name="model_${rowCount}" class="form-control">
                        <option value="">--Select--</option>
                        <option value="Beta-Poisson">Beta-Poisson</option>
                        <option value="Exponential">Exponential</option>
                    </select>
                    <input type="text" name="other_model_${rowCount}" class="form-control" style="display: none;">
                </td>
            `;
      dataTable.querySelector('tbody').appendChild(newRow);
    });

    function updateRatioOptions(selectElement) {
      const rowIndex = selectElement.name.split('_')[1];
      const mstmakerSelect = document.querySelector(`[name=mstmaker_${rowIndex}]`);
      const ratioSelect = document.querySelector(`[name=ratio_${rowIndex}]`);

      const otherMstMakerInput = document.querySelector(`[name=other_mstmaker_${rowCount}]`);
      const otherRatioInput = document.querySelector(`[name=other_ratio_${rowCount}]`);

      const mstmakerValue = selectElement.value;
      const ratioValue = selectElement.value;

      if (mstmakerValue === 'Cow') {
        ratioSelect.innerHTML = `
                    <option value="1:0.66">1:0.66</option>   
                `;
      } else if (mstmakerValue === 'Human') {
        ratioSelect.innerHTML = `
                    <option value="1:1">1:1</option>
                `;
      } else if (mstmakerValue === 'Dog') {
        ratioSelect.innerHTML = `
                    <option value="1:0.01">1:0.01</option>
                `;
      } else if (mstmakerValue === 'Pig') {
        ratioSelect.innerHTML = `
                    <option value="1:0.08">1:0.08</option>
                `;
      } else if (mstmakerValue === 'Chicken') {
        ratioSelect.innerHTML = `
                    <option value="1:0.01">1:0.01</option>
                `;
      } else {
        ratioSelect.innerHTML = `
                    <option value="1:0.66">1:0.66</option>
                    <option value="1:1">1:1</option>
                    <option value="1:0.01">1:0.01</option>
                    <option value="1:0.08">1:0.08</option>
                    <option value="1:0.01">1:0.01</option>
                `;
      }

      if (mstmakerValue === 'Other') {
        mstmakerSelect.style.display = 'none';
        otherMstMakerInput.style.display = 'block';
      } else {
        ratioSelect.style.display = 'block';
        otherMstMakerInput.style.display = 'none';
      }

      if (ratioValue === 'Other') {
        otherRatioInput.style.display = 'block';
        ratioSelect.style.display = 'none';
      } else {
        otherRatioInput.style.display = 'none';
        ratioSelect.style.display = 'block';
      }

    }

    function updateModelOptions(selectElement) {
      const rowIndex = selectElement.name.split('_')[1];
      const pathogenSelect = document.querySelector(`[name=pathogen_${rowIndex}]`);
      const modelSelect = document.querySelector(`[name=model_${rowIndex}]`);

      const otherPathogenInput = document.querySelector(`[name=other_pathogen_${rowCount}]`);
      const otherModelInput = document.querySelector(`[name=other_model_${rowCount}]`);

      const pathogenValue = selectElement.value;
      const modelValue = selectElement.value;

      if (pathogenValue === 'Cryptosporidium parvum' || pathogenValue === 'Giardia lambia') {
        modelSelect.innerHTML = `
                    <option value="Exponential">Exponential</option>
                `;
      } else {
        modelSelect.innerHTML = `
                    <option value="Beta-Poisson">Beta-Poisson</option>
                `;
      }

      if (pathogenValue === 'Other') {
        otherPathogenInput.style.display = 'block';
        pathogenSelect.style.display = 'none';
      } else {
        otherPathogenInput.style.display = 'none';
        pathogenSelect.style.display = 'block';
      }

      if (modelValue === 'Other') {
        otherModelInput.style.display = 'block';
        modelSelect.style.display = 'none';
      } else {
        otherModelInput.style.display = 'none';
        modelSelect.style.display = 'block';
      }
    }

    document.getElementById('calculateEstimatedCount').addEventListener('click', function () {
      alert('Estimated Count calculated.');
    });
    
  </script>
</body>

</html>